webpackJsonp([4],{"/pee":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),n=s("NYxO"),o=s("TdvZ"),c=s("KPn7"),r=s("ssT3"),m={name:"Detail",components:{Right:o.a},data:function(){return{msg:"",msgType:"",msgShow:!1,contentss:"",article:[],comments:[]}},created:function(){var t=this,e=this.$route.query.id;this.axios.get("http://www.xiaoyeyedada.cn/api/articles/"+e).then(function(e){t.article=e.data}).catch(function(t){console.log(t)}),this.getComment()},beforeRouteEnter:function(t,e,s){var a=e.name,i=t.params.logout;s(function(t){if(t.$store.state.auth)switch(a){case"Register":t.showMsg("注册成功");break;case"Login":t.showMsg("登录成功")}else i&&t.showMsg("操作成功")})},computed:i()({},Object(n.b)(["auth","user","articles"])),watch:{auth:function(t){t||this.showMsg("操作成功")}},methods:{getComment:function(){var t=this,e=this.$route.query.id;this.axios.get(c.a.api+"/api/articles/"+e+"/comments").then(function(e){t.comments=e.data.data,console.log(t.comments)}).catch(function(t){console.log(t)})},comment:function(){var t=this;if(this.$store.state.auth){var e={contents:this.contentss},s=this.$route.query.id;this.axios({method:"post",url:c.a.api+"/api/articles/"+s+"/comments",data:e,headers:{Authorization:"Bearer "+r.a.getItem("access_token")}}).then(function(e){t.$swal({text:"评论成功",type:"success"}),t.getComment()})}else this.$swal({text:"登录后才能评论!",confirmButtonText:"去登录"}).then(function(e){e.value&&t.$router.push({name:"Login"})})},showMsg:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.msg=t,this.msgType=e,this.msgShow=!0}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Message",{attrs:{show:t.msgShow,type:t.msgType,msg:t.msg},on:{"update:show":function(e){t.msgShow=e}}}),t._v(" "),s("div",{staticClass:"page_left",staticStyle:{background:"#fff",padding:"10px"}},[s("div",{staticClass:"detail_container trans_3"},[s("h1",[t._v(t._s(t.article.title))]),t._v(" "),s("div",{staticClass:"date_hits"},[s("span",[s("i",[t._v("修改时间：")]),t._v(t._s(t.article.created_at))]),s("span",[s("i",[t._v("作者：")]),t._v(t._s(t.article.author))]),s("span",[s("i",[t._v("热度：")]),t._v(" "+t._s(t.article.looked)+" ℃")]),s("span",[s("i",[t._v("评论数：")]),t._v(t._s(t.article.reply))])]),t._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.article.content)}})]),t._v(" "),s("div",{staticClass:"comments"},t._l(t.comments,function(e){return s("div",{staticClass:"comment"},[s("div",[s("span",{staticClass:"comment-name"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"comment-time"},[t._v(t._s(e.created_at))])]),t._v(" "),s("div",{staticClass:"comment-content"},[t._v(t._s(e.contents))]),t._v(" "),t._m(0,!0)])})),t._v(" "),s("div",{staticClass:"ui segment extra-padding comment-composing-box",staticStyle:{padding:"20px","margin-left":"10px"}},[t._m(1),t._v(" "),s("div",{staticClass:"field"},[s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.contentss,expression:"contentss",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{error:"请输入评论内容"},expression:"{ error: '请输入评论内容' }",modifiers:{required:!0}}],staticStyle:{width:"100%","font-size":"16px",height:"64px"},domProps:{value:t.contentss},on:{input:function(e){e.target.composing||(t.contentss=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit",id:"comment-composing-submit"},on:{click:t.comment}},[s("i",{staticClass:"icon comment"}),t._v(" 评论\n        ")])])]),t._v(" "),s("Right")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"comment-action"},[e("span",{staticClass:"comment-reply"},[this._v("赞同")]),e("span",{staticClass:"comment-like"},[this._v("反对")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message info"},[e("i",{staticClass:"icon info",attrs:{"aria-hidden":"true"}}),this._v("   请勿发布不友善或者负能量的内容。与人为善，比聪明更重要！\n        ")])}]};var u=s("VU/8")(m,l,!1,function(t){s("FFzI")},"data-v-8eb30a70",null);e.default=u.exports},FFzI:function(t,e){}});
//# sourceMappingURL=4.6022a34691a66fdead0f.js.map